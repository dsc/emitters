/*
 *      emitters -- 0.2.1
 *      (c) 2012-2014 David Schoonover <dsc@less.ly> (http://less.ly)
 *      emitters is freely distributable under the MIT license.
 *      
 *      For all details and documentation:
 *      http://github.com/dsc/emitters
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.emitters=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){function u(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}var r,i,s=typeof n!="undefined"&&n||this,o=[].slice;r=e("./emitter").EventEmitter,s.ChainedEmitter=i=function(e){function i(e){e&&this.parentEmitter(e)}i.displayName="ChainedEmitter";var t=u(i,e).prototype,n=i;return i.__emitter_methods__=r.__emitter_methods__.concat(["parentEmitter"]),t.parentEmitter=function(e){return e==null?this._parentEmitter:(this._parentEmitter=e,this)},t.trigger=function(e){var t,n,r,i,s,u,a,f,l;t=o.call(arguments,1),n=!0;if(r=(this._events||{})[e])for(i=0,s=r.length;i<s;++i)u=r[i],n=u.apply(this,t)!==!1&&n;return n&&typeof ((a=this._parentEmitter)!=null?a.trigger:void 8)=="function"&&(f=(l=this._parentEmitter).trigger.apply(l,arguments)||!!r),f},t.emit=i.prototype.trigger,i}(r)},{"./emitter":3}],2:[function(e,t,n){function s(e,t,n,i){var s,o,u,a,f,l;if(!n)return!0;if(typeof n=="object"){for(s in n)o=n[s],e[t].apply(e,[s,o].concat(i));return!1}if(r.test(n)){for(u=0,f=(a=n.split(r)).length;u<f;++u)l=a[u],e[t].apply(e,[l].concat(i));return!1}return!0}function o(e,t){var n,r,i,s,o,u,f,l,c,h,p,d,v;switch(t.length){case 0:for(n=0,r=e.length;n<r;++n)i=e[n],i.callback.call(i.ctx);return;case 1:for(s=0,o=e.length;s<o;++s)i=e[s],i.callback.call(i.ctx,a[0]);return;case 2:for(u=0,f=e.length;u<f;++u)i=e[u],i.callback.call(i.ctx,a[0],a[1]);return;case 3:for(l=0,c=e.length;l<c;++l)i=e[l],i.callback.call(i.ctx,a[0],a[1],a[2]);return;case 4:for(h=0,p=e.length;h<p;++h)i=e[h],i.callback.call(i.ctx,a[0],a[1],a[2],a[3]);return;default:for(d=0,v=e.length;d<v;++d)i=e[d],i.callback.apply(i.ctx,t);return}}function u(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}var r,i=typeof n!="undefined"&&n||this;r=/\s+/,i.eventsApi=s,i.triggerEvents=o,i.once=u},{}],3:[function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=typeof n!="undefined"&&n||this;r=e("./emitter-helpers"),i=r.eventsApi,s=r.triggerEvents,o=r.once;try{u=e("events").EventEmitter,u.displayName||(u.displayName="EventEmitter"),(a=u.prototype).trigger||(a.trigger=u.prototype.emit),(f=u.prototype).off||(f.off=u.prototype.removeListener)}catch(y){l=y,c=Object.prototype,h=c.toString,p=c.hasOwnProperty,d=Array.isArray||function(e){return h.call(e)=="[object Array]"},v=Object.keys||function(e){var t,n=[];for(t in e)p.call(e,t)&&n.push(t);return n},u=function(){function n(){}n.displayName="EventEmitter";var e=n.prototype,t=n;return e.emit=function(e){var t,n;return this._events?(t=[].slice.call(arguments,1),i(this,"trigger",e,t)?((n=this._events[e])&&s(n,t),(n=this._events.all)&&s(n,arguments),this):this):this},e.trigger=n.prototype.emit,e.on=function(e,t,n){var r;return!i(this,"on",e,[t,n])||!t?this:(e={fn:t,thisArg:n,ctx:n||this},r=this._events||(this._events={}),r[e]?(r[e]=queue.slice()).push(e):r[e]=[e],this)},e.addListener=n.prototype.on,e.once=function(e,t,n){var r,s;return!i(this,"once",e,[t,n])||!t?this:(r=this,s=o(function(){return r.off(e,s),t.apply(this,arguments)}),s.listener=t,this.on(e,n,s))},e.off=function(e,t,n){var r,s,o,u,a,f,l;if(!this._events||!i(this,"off",e,[t,n]))return this;if(!(e||n||t))return this._events={},this;r=e?[e]:v(this._events);for(s=0,o=r.length;s<o;++s){e=r[s];if(!(u=this._events[e]))continue;if(!t&&!n){delete this._events[e];continue}a=this._events[e]=[];for(f=0,l=u.length;f<l;++f)e=u[f],(t&&t!==e.fn&&t!==e.fn.listener||n&&n!==e.thisArg)&&a.push(e);a.length||delete this._events[e]}return this},e.removeListener=n.prototype.off,e.removeAllListeners=n.prototype.off,e.listeners=function(e){var t,n;return t=((n=this._events)!=null?n[e]:void 8)||[],d(t)||(t=events[e]=[events[e]]),t},e.setMaxListeners=function(e){return console.warn("EventEmitter::setMaxListeners() is unsupported!")},n.listenerCount=function(e,t){var n,r;return(e!=null?(n=e._events)!=null?(r=n[t])!=null?r.length:void 8:void 8:void 8)||0},n}()}g.DEFAULT_EVENT_EMITTER_METHODS=m=["emit","trigger","on","off","addListener","removeListener","removeAllListeners","once","listeners"],u.__emitter_methods__=m,u.__class__=u,u.delegate=function(e,t,n){var r,i,s,o,u;if(!e||!t)return t;r=this.prototype,n==null&&(n=this.__emitter_methods__||m);for(i=0,s=n.length;i<s;++i)o=n[i],u=e[o]||r[o],typeof u=="function"&&(t[o]=u.bind(e));return t},u.decorate=function(e,t){var n,r,i,s;n=this.prototype,t==null&&(t=this.__emitter_methods__||m);for(r=0,i=t.length;r<i;++r)s=t[r],e[s]=n[s];return e},u.extended=function(e){var t,n,r,i={}.hasOwnProperty;t=this;for(n in t)i.call(t,n)&&(r=t[n],e[n]||(e[n]=r));return e.__class__=e,e.__super__=t.prototype,e.__superclass__=t,e},n.EventEmitter=u},{"./emitter-helpers":2}],bRhrlU:[function(e,t,n){function r(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}n.VERSION="0.2.1",r(n,e("./emitter")),r(n,e("./chained-emitter")),r(n,e("./ready-emitter")),r(n,e("./waiting-emitter")),r(n,e("./utils")),n.helpers=e("./emitter-helpers")},{"./chained-emitter":1,"./emitter":3,"./emitter-helpers":2,"./ready-emitter":6,"./utils":7,"./waiting-emitter":8}],emitters:[function(e,t,n){t.exports=e("bRhrlU")},{}],6:[function(e,t,n){function o(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}var r,i,s=typeof n!="undefined"&&n||this;r=e("./emitter").EventEmitter,s.ReadyEmitter=i=function(e){function i(){}i.displayName="ReadyEmitter";var t=o(i,e).prototype,n=i;return i.__emitter_methods__=r.__emitter_methods__.concat(["ready"]),t._ready=!1,t.__ready_event__="ready",t.ready=function(e,t){var n;return t==null&&(t=!1),e==null?!!this._ready:(n=this.__ready_event__||"ready",typeof e=="function"?this.on(n,e):(e=!!e,e==this._ready&&!t?this:(this._ready=e,e||(n+="-reset"),this.emit(n,this),this)))},t.on=function(t,n){var r,i=this;return e.prototype.on.apply(this,arguments),r=this.__ready_event__||"ready",this.ready()&&t.split(/\s+/).indexOf(r)>-1&&setTimeout(function(){return n.call(i,i)}),this},t.addListener=i.prototype.on,i}(r)},{"./emitter":3}],7:[function(e,t,n){function s(e){var t;t=i.call(arguments,1);if(typeof (e!=null?e.emit:void 8)!="function")throw TypeError;return function(){e.emit.apply(e,t)}}function o(e,t,n){var r;n==null&&(n="all");if(typeof (e!=null?e.on:void 8)!="function"||typeof (t!=null?t.emit:void 8)!="function")throw TypeError;return r=function(){t.emit.apply(t,arguments)},e.on(n,r),r}var r=typeof n!="undefined"&&n||this,i=[].slice;r.emitEvent=s,r.redispatch=o},{}],8:[function(e,t,n){function o(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}var r,i,s=typeof n!="undefined"&&n||this;r=e("./emitter").EventEmitter,s.WaitingEmitter=i=function(e){function i(){}i.displayName="WaitingEmitter";var t=o(i,e).prototype,n=i;return i.__emitter_methods__=r.__emitter_methods__.concat(["waitingOn","wait","unwait","unwaitAnd"]),t._waitingOn=0,t.waitingOn=function(){return this._waitingOn||0},t.wait=function(){var e;return e=this._waitingOn||0,this._waitingOn+=1,e===0&&this._waitingOn>0&&this.trigger("start-waiting",this),this},t.unwait=function(){var e;return e=this._waitingOn||0,this._waitingOn-=1,this._waitingOn===0&&e>0&&this.trigger("stop-waiting",this),this},t.unwaitAnd=function(e,t){var n;return n=this,function(){var t;return n.unwait(),t==null&&(t=this),e.apply(t,arguments)}},i}(r)},{"./emitter":3}]},{},["bRhrlU"])("bRhrlU")})